<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<spade_config>
  <assembly>
    <name>SPADE@UKDC</name>
    <ticket_limit>128</ticket_limit>
    <activity>
      <name>examiner</name>
      <threads>1</threads>
    </activity>
    <activity>
      <name>pre_shipper</name>
      <threads>2</threads>
    </activity>
    <activity>
      <name>fetcher</name>
      <threads>16</threads>
    </activity>
    <activity>
      <name>finisher</name>
      <threads>1</threads>
    </activity>
    <activity>
      <name>placer</name>
      <threads>16</threads>
      <policy>
        <class>gov.lbl.lz.spade.metadata.impl.LzPlacement</class>
      </policy>
    </activity>
    <activity>
      <name>post_shipper</name>
      <threads>1</threads>
    </activity>
    <activity>
      <name>shipper</name>
      <threads>32</threads>
    </activity>
    <activity>
      <name>analyzer</name>
      <init-param>
        <param-name>command</param-name>
        <param-value><![CDATA[/opt/spade/spade/scripts/create_dirac_file_registration {2} {1}]]></param-value>
      </init-param>
      <init-param>
        <param-name>output</param-name>
        <param-value>/opt/spade/spade/dirac_analyzer_logs/</param-value>
      </init-param>
    </activity>
  </assembly>

  <warehouse>
    <root_path>/pnfs/hep.ph.ic.ac.uk/data/lz/lz/warehouse</root_path>
  </warehouse>
  <archive>
    <root_path>/pnfs/hep.ph.ic.ac.uk/data/lz/spade/archive</root_path>
  </archive>
  <cache>
    <root_path>/opt/spade/spade/cache</root_path>
    <minimum units="GB">1</minimum>
  </cache>

  <!--- Transfers to and from RALPP -->
   
  <outbound_transfer>
    <name>OUT_TO_RALPP</name>
    <neighbor>SPADE@RALPP</neighbor>
    <location>heplnx204.pp.rl.ac.uk:pnfs/pp.rl.ac.uk/data/lz/spade/receiving/ukdc</location>
    <class>gov.lbl.nest.spade.services.impl.GfalTransfer</class>
  </outbound_transfer>
  
  <inbound_transfer>
    <name>IN_FROM_RALPP</name>
    <neighbor>SPADE@RALPP</neighbor>
    <location>/pnfs/hep.ph.ic.ac.uk/data/lz/spade/dropbox/ralpp</location>
    <scan_limit>128</scan_limit>
  </inbound_transfer>

  <!-- Transfers from and to USDC -->

  <outbound_transfer>
    <name>OUT_TO_USDC</name>
    <neighbor>SPADE@USDC</neighbor>
    <location>dtn02.nersc.gov:/global/projecta/projectdirs/lz/spade/receiving/ukdc</location>
    <class>gov.lbl.nest.spade.services.impl.GfalTransfer</class>
    <init-param>
      <param-name>flags</param-name>
      <param-value>--timeout 1800</param-value>
    </init-param>
    <init-param>
      <param-name>port</param-name>
      <param-value>2811</param-value>
    </init-param>
    <init-param>
      <param-name>protocol</param-name>
      <param-value>gsiftp</param-value>
    </init-param>
  </outbound_transfer>

  <inbound_transfer>
    <name>IN_FROM_USDC</name>
    <neighbor>SPADE@USDC</neighbor>
    <location>/pnfs/hep.ph.ic.ac.uk/data/lz/spade/dropbox/usdc</location>
    <scan_limit>128</scan_limit>
  </inbound_transfer>
 

  <!-- For the I'm happy callbacks -->
  
  <neighborhood>
    <neighbor>
      <name>SPADE@RALPP</name>
      <urls>
	<api>https://repro.pp.rl.ac.uk/spade/local/report/</api>
	<confirmables>timestamps/confirmable</confirmables>
      </urls>
    </neighbor>

    <neighbor>
      <name>SPADE@USDC</name>
      <urls>
        <api>https://lux-zeplin.lbl.gov/spade/usdc/report/</api>
        <confirmables>timestamps/confirmable</confirmables>
      </urls>
    </neighbor>
  </neighborhood>

</spade_config>
